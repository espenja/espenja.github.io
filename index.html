<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Addon Recommendations - Guild Guide</title>
    <style>
      :root {
        --bg-primary: #0d1117;
        --bg-secondary: #161b22;
        --bg-tertiary: #21262d;
        --bg-hover: #30363d;
        --text-primary: #c9d1d9;
        --text-secondary: #8b949e;
        --text-bright: #f0f6fc;
        --accent-primary: #58a6ff;
        --accent-secondary: #4ba0f6;
        --border-color: #21262d;
        --code-bg: #161b22;
        --note-bg: #161b22;
      }

      [data-theme="light"] {
        --bg-primary: #ebe9e6;
        --bg-secondary: #f2f0ed;
        --bg-tertiary: #d9d7d4;
        --bg-hover: #e3e1de;
        --text-primary: #2d2d2d;
        --text-secondary: #5c5c5c;
        --text-bright: #1a1a1a;
        --accent-primary: #0969da;
        --accent-secondary: #0550ae;
        --border-color: #c8c6c3;
        --code-bg: #e8e6e3;
        --note-bg: #e8e6e3;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        background-color: var(--bg-primary);
        color: var(--text-primary);
        font-family:
          -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans", Helvetica,
          Arial, sans-serif;
        font-size: 16px;
        line-height: 1.6;
        padding: 20px;
        transition:
          background-color 0.3s ease,
          color 0.3s ease;
      }

      .container {
        max-width: 1024px;
        margin: 0 auto;
        padding: 40px 20px;
      }

      h1 {
        color: var(--text-bright);
        font-size: 2em;
        font-weight: 600;
        margin-bottom: 0.5em;
        padding-bottom: 0.3em;
        border-bottom: 1px solid var(--border-color);
      }

      h2 {
        color: var(--accent-secondary);
        font-size: 1.5em;
        font-weight: 600;
        margin-top: 1.5em;
        margin-bottom: 0.5em;
        cursor: pointer;
        user-select: none;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      h2::before {
        content: "â–¼";
        font-size: 0.7em;
        transition: transform 0.2s ease;
        display: inline-block;
      }

      h2.collapsed::before {
        transform: rotate(-90deg);
      }

      h3 {
        color: var(--text-bright);
        font-size: 1.25em;
        font-weight: 600;
        margin-top: 1.2em;
        margin-bottom: 0.5em;
      }

      .addon-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 0.5em;
        flex-wrap: wrap;
        gap: 10px;
      }

      .addon-header-left {
        display: flex;
        flex-direction: column;
        gap: 8px;
        flex: 1;
        min-width: 0;
      }

      .addon-title-row {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .addon-badge-row {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
        align-items: center;
      }

      .addon-header h3 {
        margin: 0;
      }

      .addon-badge {
        display: inline-block;
        background-color: #1f6feb;
        color: #ffffff;
        padding: 3px 8px;
        border-radius: 3px;
        font-size: 0.7em;
        font-weight: 600;
        white-space: nowrap;
      }

      .addon-badge.green {
        background-color: #238636;
      }

      .addon-badge.yellow {
        background-color: #9e6a03;
      }

      .addon-badge.red {
        background-color: #cf222e;
      }

      .addon-badge.purple {
        background-color: #8957e5;
      }

      .command-badge {
        background-color: var(--code-bg);
        color: var(--accent-primary);
        padding: 4px 10px;
        border-radius: 3px;
        font-family: "Consolas", "Monaco", "Courier New", monospace;
        font-size: 0.85em;
        border: 1px solid var(--border-color);
        white-space: nowrap;
      }

      .description-badge {
        background-color: #2f3c4e;
        color: #ffffff;
      }

      [data-theme="light"] .description-badge {
        background-color: #5a6c7d;
        color: #ffffff;
      }

      h4 {
        color: var(--text-secondary);
        font-size: 1em;
        font-weight: 600;
        margin-top: 1em;
        margin-bottom: 0.5em;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-size: 0.85em;
      }

      p {
        margin-bottom: 1em;
        color: var(--text-primary);
      }

      ul,
      ol {
        margin-bottom: 1em;
        padding-left: 2em;
      }

      li {
        margin-bottom: 0.25em;
        color: var(--text-primary);
      }

      code {
        background-color: var(--code-bg);
        color: var(--text-bright);
        padding: 0.2em 0.4em;
        border-radius: 3px;
        font-family: "Consolas", "Monaco", "Courier New", monospace;
        font-size: 0.9em;
      }

      pre {
        background-color: var(--code-bg);
        color: var(--text-primary);
        padding: 16px;
        border-radius: 6px;
        overflow-x: auto;
        margin-bottom: 1em;
        border: 1px solid var(--border-color);
      }

      pre code {
        background-color: transparent;
        padding: 0;
      }

      a {
        color: var(--accent-primary);
        text-decoration: none;
      }

      a:hover {
        text-decoration: underline;
      }

      img {
        max-width: 100%;
        height: auto;
        border-radius: 6px;
        border: 1px solid var(--border-color);
        margin: 1em 0;
        display: block;
      }

      .img-caption {
        text-align: center;
        color: var(--text-secondary);
        font-size: 0.9em;
        font-style: italic;
        margin-top: -0.5em;
        margin-bottom: 1em;
      }

      blockquote {
        border-left: 3px solid var(--accent-primary);
        padding-left: 1em;
        margin: 1em 0;
        color: var(--text-secondary);
        font-style: italic;
      }

      hr {
        border: none;
        border-top: 1px solid var(--border-color);
        margin: 1em 0;
      }

      .badge {
        display: inline-block;
        background-color: #1f6feb;
        color: #ffffff;
        padding: 2px 8px;
        border-radius: 3px;
        font-size: 0.75em;
        font-weight: 600;
        margin-left: 8px;
        vertical-align: middle;
      }

      .badge.green {
        background-color: #238636;
      }

      .badge.yellow {
        background-color: #9e6a03;
      }

      .badge.red {
        background-color: #cf222e;
      }

      .section-wrapper {
        border-left: 4px solid var(--border-color);
        padding-left: 20px;
        margin-bottom: 2em;
      }

      .section-wrapper.must-haves {
        border-left-color: #cf222e;
      }

      .section-wrapper.frames {
        border-left-color: #9e6a03;
      }

      .section-wrapper.cooldown-manager {
        border-left-color: #8957e5;
      }

      .section-wrapper.combat {
        border-left-color: #238636;
      }

      .section-wrapper.qols {
        border-left-color: #17a2b8;
      }

      .section-wrapper.other {
        border-left-color: #58a6ff;
      }

      .section-wrapper.fps {
        border-left-color: #ef66ef;
      }

      .section-wrapper.profiles {
        border-left-color: #bc7a08;
      }

      .section-content {
        overflow: hidden;
        transition:
          max-height 0.1s ease-out,
          opacity 0.08s ease-out;
        max-height: 20000px;
        opacity: 1;
      }

      .section-content.profiles div {
        padding-bottom: 1em;
      }

      .section-content.collapsed {
        max-height: 0;
        opacity: 0;
        margin: 0;
        transition:
          max-height 0.1s ease-in,
          opacity 0.03s ease-in;
      }

      .addon-block {
        margin-bottom: 1em;
        padding-bottom: 1em;
        border-bottom: 1px solid #21262d;
      }

      .addon-block:last-child {
        border-bottom: none;
      }

      strong {
        color: var(--text-bright);
        font-weight: 600;
      }

      [data-theme="light"] strong {
        color: #1a1a1a;
      }

      .note {
        background-color: var(--note-bg);
        border-left: 3px solid var(--accent-primary);
        padding: 12px 16px;
        margin: 1em 0;
        border-radius: 0 6px 6px 0;
      }

      .note strong {
        color: var(--accent-primary);
      }

      .note-green {
        border-left: 3px solid #ec7c04;
      }

      .note-green strong {
        color: #ec7c04;
      }

      .image-section {
        margin-top: 1em;
      }

      .image-toggle {
        color: var(--accent-primary);
        cursor: pointer;
        user-select: none;
        font-size: 1em;
        display: inline-flex;
        align-items: center;
        gap: 6px;
      }

      .image-toggle:hover {
        text-decoration: underline;
      }

      .image-toggle::before {
        content: "â–¼";
        font-size: 0.7em;
        transition: transform 0.2s ease;
        display: inline-block;
      }

      .image-toggle.collapsed::before {
        transform: rotate(-90deg);
      }

      .image-content {
        overflow: hidden;
        transition:
          max-height 0.3s ease,
          opacity 0.3s ease;
        max-height: 2000px;
        opacity: 1;
        margin-top: 0.5em;
      }

      .image-content.collapsed {
        max-height: 0;
        opacity: 0;
        margin: 0;
      }

      .addon-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 1em;
        display: table;
      }

      .addon-table thead {
        background-color: var(--bg-secondary);
      }

      .addon-table th {
        padding: 12px 16px;
        border: 1px solid var(--border-color);
        font-weight: 600;
        color: var(--text-bright);
        text-align: left;
      }

      .addon-table td {
        padding: 12px 16px;
        border: 1px solid var(--border-color);
        vertical-align: top;
      }

      .addon-table td:first-child {
        font-weight: 600;
        color: var(--text-bright);
        width: 30%;
      }

      .addon-table td:last-child {
        color: var(--text-primary);
        width: 70%;
      }

      .enhanceqol-table td:nth-child(2) {
        text-align: center;
      }

      /* Responsive Tables for Mobile */
      @media (max-width: 768px) {
        .addon-table {
          border: 0;
        }

        .addon-table thead {
          display: none;
        }

        .addon-table tr {
          display: block;
          margin-bottom: 12px;
          border: 1px solid var(--border-color);
          border-radius: 6px;
          background-color: var(--bg-secondary);
        }

        .addon-table td {
          display: block;
          border: none;
          border-bottom: 1px solid var(--border-color);
          text-align: left !important;
          padding: 10px 12px;
        }

        .addon-table td:last-child {
          border-bottom: none;
        }

        .addon-table td:before {
          content: attr(data-label);
          font-weight: 500;
          color: var(--text-secondary);
          display: block;
          margin-bottom: 6px;
          font-size: 0.75em;
          text-transform: uppercase;
          letter-spacing: 0.8px;
        }

        /* Special handling for enhanceqol-table */
        .enhanceqol-table td:nth-child(1):before {
          content: "Setting";
        }

        .enhanceqol-table td:nth-child(2):before {
          content: "Toggle";
        }

        .enhanceqol-table td:nth-child(3):before {
          content: "Category";
        }

        .enhanceqol-table td:nth-child(2) {
          text-align: left !important;
        }

        /* For the other addon table (2 column) */
        .addon-table:not(.enhanceqol-table) td:first-child:before {
          content: "Addon";
        }

        .addon-table:not(.enhanceqol-table) td:last-child:before {
          content: "Description";
        }

        .addon-table td:first-child {
          width: 100%;
        }

        .addon-table td:last-child {
          width: 100%;
        }
      }

      .pre-wrapper {
        position: relative;
      }

      .copy-button {
        position: absolute;
        top: 8px;
        right: 8px;
        background-color: var(--bg-tertiary);
        color: var(--text-primary);
        border: 1px solid var(--bg-hover);
        border-radius: 4px;
        padding: 6px 12px;
        font-size: 0.85em;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .copy-button:hover {
        background-color: var(--bg-hover);
        border-color: var(--accent-primary);
      }

      .copy-button.copied {
        background-color: #238636;
        border-color: #238636;
        color: #ffffff;
      }

      .pre-wrapper pre {
        padding-top: 40px;
      }

      /* Theme Switcher Button */
      .theme-switcher {
        position: fixed;
        top: 20px;
        right: 20px;
        width: 52px;
        height: 52px;
        border-radius: 50%;
        border: 2px solid var(--border-color);
        background: var(--bg-secondary);
        color: var(--text-bright);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 22px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        z-index: 1000;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        outline: none;
      }

      .theme-switcher:hover {
        background: var(--bg-hover);
        transform: scale(1.1) rotate(15deg);
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
      }

      .theme-switcher:active {
        transform: scale(0.95);
      }

      /* Prevent FOUC - hide content until loaded */
      [data-include]:not(.loaded) {
        opacity: 0;
        min-height: 20px;
      }

      [data-include].loaded {
        opacity: 1;
        transition: opacity 0.2s ease-in;
      }

      [data-theme="light"] .theme-switcher {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      }

      [data-theme="light"] .theme-switcher:hover {
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
      }

      .theme-icon {
        display: inline-block;
        transition: transform 0.3s ease;
      }

      .theme-switcher:hover .theme-icon {
        transform: rotate(-15deg);
      }

      .footer {
        text-align: center;
        font-size: 0.9em;
        color: var(--text-secondary);
      }
    </style>
  </head>
  <body>
    <button class="theme-switcher" id="themeSwitcher" aria-label="Toggle theme">
      <span class="theme-icon">ðŸŒ™</span>
    </button>
    <div class="container">
      <h1>War Within â†’ Midnight Addons Tips and Tricks</h1>
      <div>
        <div class="note">
          These are addon recommendations for War Within â†’ Midnight. These
          addons are tested and verified to currently work with the Midnight
          expansion and are either essential, recommended, or quality of life
          improvements.<br />
          Full profiles for some of them are at the bottom of the page. Import
          at your own peril.
        </div>
      </div>
      <div class="section-wrapper fps">
        <h2 onclick="toggleSection(this)">Possible FPS gains</h2>
        <div class="section-content collapsed">
          <div data-include="sections/fps-gains.html"></div>
        </div>
      </div>
      <hr />
      <div class="section-wrapper must-haves">
        <h2 onclick="toggleSection(this)">Core Addons</h2>
        <div class="section-content collapsed">
          <div data-include="sections/core/index.html"></div>
        </div>
      </div>
      <hr />
      <div class="section-wrapper frames">
        <h2 onclick="toggleSection(this)">Frames</h2>
        <div class="section-content collapsed">
          <div data-include="sections/frames/index.html"></div>
        </div>
      </div>
      <hr />
      <div class="section-wrapper cooldown-manager">
        <h2 onclick="toggleSection(this)">
          Cooldown Manager (Class Based WeakAura's Replacements)
        </h2>
        <div class="section-content collapsed">
          <div data-include="sections/cooldown-manager/index.html"></div>
        </div>
      </div>
      <hr />
      <div class="section-wrapper combat">
        <h2 onclick="toggleSection(this)">Combat/Raid/M+ Addons</h2>
        <div class="section-content collapsed">
          <div data-include="sections/combat/index.html"></div>
        </div>
      </div>
      <hr />
      <div class="section-wrapper qols">
        <h2 onclick="toggleSection(this)">
          Quality of Life Addons (Please read)
        </h2>
        <div class="section-content collapsed">
          <div data-include="sections/qol/index.html"></div>
        </div>
      </div>
      <hr />
      <div class="section-wrapper other">
        <h2 onclick="toggleSection(this)">
          Other good addons without going into detail
        </h2>
        <div class="section-content collapsed">
          <div data-include="sections/other.html"></div>
        </div>
      </div>
      <hr />
      <div class="section-wrapper profiles">
        <h2 class="section-header" onclick="toggleSection(this)">
          Addon Profiles
        </h2>
        <div class="section-content collapsed">
          <div data-include="sections/profiles.html"></div>
        </div>
      </div>
    </div>
    <hr />
    <p class="footer">Last updated: 2026-01-31 21:45:23</p>
    <script>
      function addCopyButtons(container = document) {
        const preTags = container.querySelectorAll("pre:not(.has-copy-button)");

        preTags.forEach((pre) => {
          pre.classList.add("has-copy-button");

          const wrapper = document.createElement("div");
          wrapper.className = "pre-wrapper";
          pre.parentNode.insertBefore(wrapper, pre);
          wrapper.appendChild(pre);

          const copyButton = document.createElement("button");
          copyButton.className = "copy-button";
          copyButton.textContent = "Copy";
          copyButton.setAttribute("aria-label", "Copy code to clipboard");

          copyButton.addEventListener("click", () => {
            navigator.clipboard
              .writeText(pre.textContent)
              .then(() => {
                copyButton.textContent = "Copied!";
                copyButton.classList.add("copied");
                setTimeout(() => {
                  copyButton.textContent = "Copy";
                  copyButton.classList.remove("copied");
                }, 2000);
              })
              .catch((err) => {
                console.error("Failed to copy:", err);
                copyButton.textContent = "Failed";
                setTimeout(() => (copyButton.textContent = "Copy"), 2000);
              });
          });

          wrapper.insertBefore(copyButton, pre);
        });
      }

      async function loadProfiles() {
        try {
          const response = await fetch("sections/profiles/profiles.json");
          const profiles = await response.json();
          const container = document.getElementById("profiles-container");

          if (!container) {
            console.error("Profiles container not found");
            return;
          }

          for (const profile of profiles) {
            const profileDiv = document.createElement("div");
            const header = document.createElement("h4");
            header.textContent = profile.name;
            const pre = document.createElement("pre");

            try {
              const contentResponse = await fetch(profile.source);
              pre.textContent = await contentResponse.text();
            } catch (error) {
              console.error(`Failed to load profile ${profile.name}:`, error);
              pre.textContent = "Error loading profile";
            }

            profileDiv.appendChild(header);
            profileDiv.appendChild(pre);
            container.appendChild(profileDiv);
          }

          addCopyButtons(container);
        } catch (error) {
          console.error("Failed to load profiles:", error);
        }
      }

      async function loadSections(container = document) {
        const includes = Array.from(
          container.querySelectorAll("[data-include]:not(.loaded)"),
        );

        if (includes.length === 0) return;

        const fetchPromises = includes.map(async (element) => {
          const file = element.getAttribute("data-include");
          try {
            const response = await fetch(file);
            if (response.ok) {
              return {
                element,
                file,
                html: await response.text(),
                success: true,
              };
            } else {
              console.error(`Failed to load ${file}: ${response.status}`);
              return { element, file, success: false };
            }
          } catch (error) {
            console.error(`Error loading ${file}:`, error);
            return { element, file, success: false };
          }
        });

        const results = await Promise.all(fetchPromises);

        for (const result of results) {
          if (result.success) {
            result.element.innerHTML = result.html;
            result.element.classList.add("loaded");
          } else {
            result.element.innerHTML = `<p style="color: var(--text-secondary);">Failed to load ${result.file}</p>`;
            result.element.classList.add("loaded");
          }
        }

        const nestedLoadPromises = results.map(async (result) => {
          if (result.success) {
            await loadSections(result.element);

            if (result.file === "sections/profiles.html") {
              await loadProfiles();
            }
          }
        });

        await Promise.all(nestedLoadPromises);
      }

      function toggleSection(header) {
        const content = header.nextElementSibling;
        header.classList.toggle("collapsed");
        content.classList.toggle("collapsed");
      }

      function toggleImage(toggle) {
        const content = toggle.nextElementSibling;
        toggle.classList.toggle("collapsed");
        content.classList.toggle("collapsed");
      }

      // Theme switcher
      (function () {
        const themeSwitcher = document.getElementById("themeSwitcher");
        const themeIcon = themeSwitcher.querySelector(".theme-icon");
        const html = document.documentElement;
        const savedTheme = localStorage.getItem("theme") || "dark";

        function setTheme(theme) {
          if (theme === "light") {
            html.setAttribute("data-theme", "light");
            themeIcon.textContent = "ðŸŒž";
          } else {
            html.removeAttribute("data-theme");
            themeIcon.textContent = "ðŸŒ™";
          }
          localStorage.setItem("theme", theme);
        }

        setTheme(savedTheme);

        themeSwitcher.addEventListener("click", () => {
          const currentTheme = html.hasAttribute("data-theme")
            ? "light"
            : "dark";
          setTheme(currentTheme === "dark" ? "light" : "dark");
        });
      })();

      // Initialize
      document.addEventListener("DOMContentLoaded", async () => {
        await loadSections();
        addCopyButtons();
      });
    </script>
  </body>
</html>
